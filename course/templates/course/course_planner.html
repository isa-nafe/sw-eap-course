{% extends 'course/base.html' %}
{% load course_extras %}
{% block title %}Course Planner - {{ block.super }}{% endblock %}

{% block content %}
  <h2 class="mb-4">Course Planner</h2>
  {% if planner_data and headers %}
    <div class="table-responsive">
      <table class="table table-striped table-hover table-bordered">
        <thead class="table-dark">
          <tr>
            {% for header in headers %}
              <th scope="col">{{ header }}</th>
            {% endfor %}
          </tr>
        </thead>
        <tbody>
          {% for row_dict in planner_data %}
            <tr>
              {% for header in headers %}
                <td>{{ row_dict|get_item:header|default_if_none:"" }}</td>
              {% endfor %}
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% elif not headers and not planner_data %}
    <div class="alert alert-warning" role="alert">
      The course planner is not available or is empty. Please check back later or contact the instructor.
    </div>
  {% else %}
     <div class="alert alert-danger" role="alert">
      Could not load planner headers or data. The planner file might be misformatted or empty.
    </div>
  {% endif %}
{% endblock %}
